<div class="member-list-container">
  <div class="list-header">
    <h2 class="list-title">All Members</h2>
    <a routerLink="/members/add" class="add-member-button">Add Member</a>
  </div>

  <div class="search-container">
    <input
      type="text"
      placeholder="Search by name, contact, or goal..."
      class="search-input"
      (input)="onSearch($event)"
    />
  </div>

  @if (paginatedMembers().length > 0) {
    <table class="member-table">
      <thead>
        <tr>
          <th class="col-name">Name</th>
          <th class="col-address hide-on-mobile">Address</th>
          <th class="col-contact hide-on-tablet">Contact Number</th>
          <th class="col-goal">Goal</th>
          <th class="col-subscription">Subscription</th>
          <th class="col-expiration">Expiration</th>
        </tr>
      </thead>
      <tbody>
        @for (member of paginatedMembers(); track member.id) {
          <tr (click)="goToUpdate(member.id)" class="member-row">
            <td data-label="Name" class="col-name">{{ member.name }}</td>
            <td data-label="Address" class="col-address hide-on-mobile">{{ member.address }}</td>
            <td data-label="Contact" class="col-contact hide-on-tablet">{{ member.contactNumber }}</td>
            <td data-label="Goal" class="col-goal">{{ member.goal }}</td>
            <td data-label="Subscription" class="col-subscription">{{ member.subscription }}</td>
            <td data-label="Expiration" class="col-expiration">{{ member.expiration | date: 'mediumDate' }}</td>
          </tr>
        }
      </tbody>
    </table>
  } @else {
    <div class="no-results">No members found.</div>
  }

  <div class="pagination-controls">
    <button (click)="previousPage()" [disabled]="currentPage() === 1">Previous</button>
    <span>Page {{ currentPage() }} of {{ totalPages() }}</span>
    <button (click)="nextPage()" [disabled]="currentPage() === totalPages()">Next</button>
  </div>
</div>

import{Ac as l,Dc as M,T as s,Tb as a,Y as o,bd as g,c as d,d as m,ka as i,uc as b,wc as u,xc as p,yc as f,zc as h}from"./chunk-ZS4IW2D6.js";var n=class t{firestore=o(b);membersCollection=f(this.firestore,"members");membersSignal=i([]);members=this.membersSignal.asReadonly();constructor(){u(this.membersCollection,{idField:"id"}).subscribe(r=>{this.membersSignal.set(r)})}getMember(e){return a(()=>this.members().find(r=>r.id===e))}addMember(e){return p(this.membersCollection,e)}updateMember(e){let r=l(this.firestore,`members/${e.id}`),c=e,{id:_}=c,y=d(c,["id"]);return M(r,y)}deleteMember(e){let r=l(this.firestore,`members/${e}`);return h(r)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};var v=class t{memberService=o(n);snackBar=o(g);members=this.memberService.members;_selectedMemberId=i(null);selectedMember=a(()=>{let e=this._selectedMemberId();return e?this.members().find(r=>r.id===e)??null:null});_loading=i(!1);loading=this._loading.asReadonly();_error=i(null);error=this._error.asReadonly();selectMember(e){this._selectedMemberId.set(e)}clearSelectedMember(){this._selectedMemberId.set(null)}addMember(e){return m(this,null,function*(){this._loading.set(!0);try{yield this.memberService.addMember(e),this.snackBar.open("Member added successfully!","Close",{duration:3e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["app-snackbar"]})}catch(r){this._error.set(r),this.snackBar.open("Failed to add member.","Close",{duration:3e3,panelClass:["error-snackbar"],verticalPosition:"bottom",horizontalPosition:"right"})}finally{this._loading.set(!1)}})}updateMember(e){return m(this,null,function*(){this._loading.set(!0);try{yield this.memberService.updateMember(e),this.snackBar.open("Member updated successfully!","Close",{duration:3e3,verticalPosition:"bottom",horizontalPosition:"right",panelClass:["app-snackbar"]})}catch(r){this._error.set(r),this.snackBar.open("Failed to update member.","Close",{duration:3e3,panelClass:["error-snackbar"],verticalPosition:"bottom",horizontalPosition:"right"})}finally{this._loading.set(!1)}})}static \u0275fac=function(r){return new(r||t)};static \u0275prov=s({token:t,factory:t.\u0275fac,providedIn:"root"})};export{v as a};
